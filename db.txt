Sql:

CREATE TABLE Users (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL,
    password VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    address TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Create categories table
CREATE TABLE categories (
    category_id INTEGER PRIMARY KEY AUTO_INCREMENT,
    category_name VARCHAR(255) NOT NULL
);

-- Create subcategories table
CREATE TABLE subcategories (
    subcategory_id INTEGER PRIMARY KEY AUTO_INCREMENT,
    subcategory_name VARCHAR(255) NOT NULL,
    category_id INTEGER,
    FOREIGN KEY (category_id) REFERENCES categories(category_id)
);

CREATE TABLE Products (
    product_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT, -- Người đăng sản phẩm
    product_name VARCHAR(100) NOT NULL,
    category_id INTEGER,
    subcategory_id INTEGER,
    description TEXT,
    starting_price DECIMAL(10, 2) NOT NULL,
    buyout_price DECIMAL(10, 2), -- Giá mua ngay
    image_url VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE,
    FOREIGN KEY (category_id) REFERENCES categories(category_id) ON DELETE CASCADE,
    FOREIGN KEY (category_id) REFERENCES categories(category_id) ON DELETE CASCADE
);

CREATE TABLE Auctions (
    auction_id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT,
    start_time TIMESTAMP NOT NULL,
    end_time TIMESTAMP NOT NULL,
    current_bid DECIMAL(10, 2), -- Giá hiện tại cao nhất
    highest_bidder_id INT, -- Người đấu giá cao nhất hiện tại
    status ENUM('open', 'closed') DEFAULT 'open',
    FOREIGN KEY (product_id) REFERENCES Products(product_id) ON DELETE CASCADE,
    FOREIGN KEY (highest_bidder_id) REFERENCES Users(user_id) ON DELETE SET NULL
);

CREATE TABLE Bids (
    bid_id INT AUTO_INCREMENT PRIMARY KEY,
    auction_id INT,
    bidder_id INT,
    bid_amount DECIMAL(10, 2) NOT NULL,
    bid_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (auction_id) REFERENCES Auctions(auction_id) ON DELETE CASCADE,
    FOREIGN KEY (bidder_id) REFERENCES Users(user_id) ON DELETE CASCADE
);

CREATE TABLE Transactions (
    transaction_id INT AUTO_INCREMENT PRIMARY KEY,
    auction_id INT,
    buyer_id INT,
    transaction_amount DECIMAL(10, 2) NOT NULL,
    transaction_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (auction_id) REFERENCES Auctions(auction_id) ON DELETE CASCADE,
    FOREIGN KEY (buyer_id) REFERENCES Users(user_id) ON DELETE CASCADE
);

CREATE TABLE Reviews (
    review_id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT,
    user_id INT, -- Người đánh giá
    rating INT CHECK (rating BETWEEN 1 AND 5),
    review_text TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES Products(product_id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES Users(user_id) ON DELETE CASCADE
);

dữ liệu cho bảng categories:

INSERT INTO categories (category_name)
VALUES
    ('Art'),
    ('Interiors'),
    ('Jewellery'),
    ('Watches'),
    ('Fashion'),
    ('Coins & Stamps'),
    ('Comics'),
    ('Cars & Bikes'),
    ('Wine & Whisky'),
    ('Asia & Tribal'),
    ('Trading cards'),
    ('Toys & Models'),
    ('Archaeology'),
    ('Sports'),
    ('Music, Movie & Cameras'),
    ('Books & History');
